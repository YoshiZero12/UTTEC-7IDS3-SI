<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>fsociety ‚Äî SI ¬∑ 7IDS3</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet"/>
  <style>
    @font-face {
      font-family: 'MRRobot';
      src: url('MR ROBOT.ttf') format('truetype');
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #0a0202;
      --surface: #150505;
      --border: #6e2020;
      --red: #ff3333;
      --red-dim: #cc2020;
      --red-glow: rgba(255,32,32,0.15);
      --text: #e8d0d0;
      --muted: #aa6060;
      --font-robot: 'MRRobot', 'Share Tech Mono', monospace;
      --font-mono: 'Share Tech Mono', monospace;
    }

    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: var(--font-mono);
      min-height: 100vh;
      overflow-x: hidden;
      animation: screenFlicker 9s infinite;
    }

    /* Scanlines */
    body::before {
      content: '';
      position: fixed; inset: 0;
      background: repeating-linear-gradient(
        0deg, transparent, transparent 2px,
        rgba(0,0,0,0.1) 2px, rgba(0,0,0,0.1) 4px
      );
      pointer-events: none;
      z-index: 100;
    }

    /* Vignette */
    body::after {
      content: '';
      position: fixed; inset: 0;
      background: radial-gradient(ellipse at center, transparent 45%, rgba(0,0,0,0.9) 100%);
      pointer-events: none;
      z-index: 99;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 0 2rem;
      position: relative;
      z-index: 1;
    }

    /* ‚îÄ‚îÄ BOOT ‚îÄ‚îÄ */
    #boot {
      position: fixed; inset: 0;
      background: #000;
      z-index: 999;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 1rem;
      animation: bootFade 0.4s 2.8s ease forwards;
    }

    .boot-logo {
      font-family: var(--font-robot);
      font-size: clamp(3rem, 10vw, 7rem);
      color: var(--red);
      text-shadow: 0 0 40px var(--red), 0 0 80px var(--red-dim);
    }

    .boot-line { font-size: 0.72rem; color: var(--muted); letter-spacing: 0.2em; }

    .boot-bar { width: 220px; height: 2px; background: #1a0000; overflow: hidden; margin-top: 0.5rem; }
    .boot-bar-fill {
      height: 100%;
      background: var(--red);
      box-shadow: 0 0 8px var(--red);
      animation: bootBar 2.5s ease forwards;
    }

    @keyframes bootBar { 0%{width:0%} 30%{width:40%} 65%{width:72%} 85%{width:88%} 100%{width:100%} }
    @keyframes bootFade { to { opacity:0; pointer-events:none; } }

    /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
    header { padding: 4rem 0 2.5rem; border-bottom: 1px solid var(--border); }

    .mr-title {
      font-family: var(--font-robot);
      font-size: clamp(3.5rem, 10vw, 8rem);
      color: var(--red);
      line-height: 0.9;
      text-shadow: 0 0 30px var(--red), 0 0 80px var(--red-dim);
      animation: fadeIn 0.6s 3.1s ease both;
      opacity: 0;
      display: inline-block;
    }

    .mr-sub {
      font-size: 0.72rem;
      color: #aa6060;
      letter-spacing: 0.25em;
      margin-top: 0.75rem;
      animation: fadeIn 0.5s 3.3s ease both;
      opacity: 0;
    }

    .header-bottom {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 2rem;
      animation: fadeIn 0.5s 3.5s ease both;
      opacity: 0;
    }

    .sys-info { font-size: 0.7rem; color: #c08080; line-height: 2; }
    .sys-info span { color: var(--red); }

    .stats { display: flex; gap: 2rem; }
    .stat-num {
      font-family: var(--font-robot);
      font-size: 2.5rem;
      color: var(--red);
      text-shadow: 0 0 20px var(--red-dim);
      line-height: 1;
    }
    .stat-label { font-size: 0.62rem; color: var(--muted); letter-spacing: 0.15em; text-transform: uppercase; margin-top: 0.2rem; }

    /* ‚îÄ‚îÄ TERMINAL ‚îÄ‚îÄ */
    .terminal {
      background: var(--surface);
      border: 1px solid var(--border);
      border-left: 2px solid var(--red);
      padding: 1rem 1.5rem;
      margin: 2rem 0;
      font-size: 0.76rem;
      line-height: 1.9;
      animation: fadeIn 0.5s 3.6s ease both;
      opacity: 0;
    }

    .t-line { display: flex; gap: 0.75rem; }
    .t-prompt { color: var(--red); flex-shrink: 0; }
    .t-out { color: #c08080; padding-left: 1.5rem; }
    .t-cursor {
      display: inline-block;
      width: 7px; height: 0.85em;
      background: var(--red);
      animation: blink 1s step-end infinite;
      vertical-align: text-bottom;
    }

    @keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0;} }

    /* ‚îÄ‚îÄ SECTION ‚îÄ‚îÄ */
    .section-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .section-label {
      font-size: 0.66rem;
      color: #cc4444;
      letter-spacing: 0.25em;
      text-transform: uppercase;
      white-space: nowrap;
    }

    .section-line { flex: 1; height: 1px; background: var(--border); }

    /* ADD BUTTON */
    .btn-add {
      font-family: var(--font-mono);
      font-size: 0.68rem;
      padding: 0.4rem 1rem;
      background: transparent;
      color: var(--red);
      border: 1px solid var(--red-dim);
      cursor: pointer;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      transition: all 0.2s;
      white-space: nowrap;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .btn-add:hover {
      background: var(--red);
      color: #000;
      box-shadow: 0 0 20px rgba(224,16,16,0.4);
    }

    /* ‚îÄ‚îÄ PROJECTS ‚îÄ‚îÄ */
    .projects { padding: 3rem 0; }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(290px, 1fr));
      gap: 1.25rem;
    }

    /* ‚îÄ‚îÄ CARD ‚îÄ‚îÄ */
    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      padding: 1.75rem;
      position: relative;
      display: flex;
      flex-direction: column;
      gap: 0.9rem;
      transition: border-color 0.3s, box-shadow 0.3s;
      animation: fadeUp 0.4s ease both;
      opacity: 0;
    }

    .card:hover {
      border-color: #cc4444;
      box-shadow: 0 0 30px rgba(224,16,16,0.07), inset 0 0 30px rgba(224,16,16,0.03);
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, var(--red), transparent);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .card:hover::before { opacity: 1; }

    .card-id {
      position: absolute;
      top: 1rem; right: 1rem;
      font-size: 0.58rem;
      color: #aa6060;
      letter-spacing: 0.1em;
    }

    .card-icon { font-size: 1.5rem; }

    .card-status {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      font-size: 0.6rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      padding: 0.2rem 0.6rem;
      border: 1px solid;
      width: fit-content;
    }

    .card-status::before { content:''; width:5px; height:5px; border-radius:50%; }

    .status-done { color:var(--red); border-color:var(--red-dim); background:rgba(224,16,16,0.05); }
    .status-done::before { background:var(--red); box-shadow:0 0 6px var(--red); }
    .status-pending { color:var(--muted); border-color:var(--border); }
    .status-pending::before { background:var(--muted); }

    h3 { font-family: var(--font-robot); font-size: 1.6rem; color: #f5e8e8; letter-spacing: 0.05em; }
    .card-coming h3 { color: var(--muted); }

    .card-desc { font-size: 0.82rem; color: #c09090; line-height: 1.7; }

    .tags { display: flex; flex-wrap: wrap; gap: 0.4rem; }
    .tag { font-size: 0.6rem; color: #c09090; border: 1px solid #6e2020; padding: 0.15rem 0.5rem; }

    .card-footer { margin-top: auto; display: flex; gap: 0.6rem; flex-wrap: wrap; }

    .btn {
      font-family: var(--font-mono);
      font-size: 0.68rem;
      padding: 0.45rem 0.9rem;
      cursor: pointer;
      text-decoration: none;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      border: 1px solid;
    }

    .btn-primary {
      background: var(--red); color: #000;
      border-color: var(--red); font-weight: 700;
      box-shadow: 0 0 15px rgba(224,16,16,0.3);
    }
    .btn-primary:hover { background: #ff2020; box-shadow: 0 0 25px rgba(224,16,16,0.5); }
    .btn-ghost { background: transparent; color: var(--muted); border-color: var(--border); }
    .btn-ghost:hover { color: var(--text); border-color: var(--muted); }
    .btn-danger { background: transparent; color: #cc4444; border-color: var(--border); font-size: 0.6rem; }
    .btn-danger:hover { color: var(--red); border-color: #cc4444; }

    .card-coming { opacity: 0.35; }
    .card-coming:hover { border-color: var(--border); box-shadow: none; opacity: 0.45; }
    .card-coming::before { display: none; }

    /* ‚îÄ‚îÄ MODAL ‚îÄ‚îÄ */
    #modal-overlay {
      position: fixed; inset: 0;
      background: rgba(0,0,0,0.85);
      z-index: 500;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    #modal-overlay.open { display: flex; }

    .modal {
      background: #080808;
      border: 1px solid var(--red-dim);
      border-top: 2px solid var(--red);
      padding: 2rem;
      width: 100%;
      max-width: 480px;
      position: relative;
      animation: fadeUp 0.3s ease;
      opacity: 1;
    }

    .modal-title {
      font-family: var(--font-robot);
      font-size: 1.8rem;
      color: var(--red);
      margin-bottom: 1.5rem;
      text-shadow: 0 0 20px var(--red-dim);
    }

    .field { margin-bottom: 1.1rem; }

    .field label {
      display: block;
      font-size: 0.65rem;
      color: #aa6060;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-bottom: 0.4rem;
    }

    .field input, .field textarea, .field select {
      width: 100%;
      background: #000;
      border: 1px solid var(--border);
      color: var(--text);
      font-family: var(--font-mono);
      font-size: 0.8rem;
      padding: 0.6rem 0.9rem;
      outline: none;
      transition: border-color 0.2s;
    }

    .field input:focus, .field textarea:focus, .field select:focus {
      border-color: #cc4444;
    }

    .field textarea { resize: vertical; min-height: 80px; }

    .field select option { background: #080808; }

    .preview-link {
      font-size: 0.65rem;
      color: #cc4444;
      margin-top: 0.4rem;
      letter-spacing: 0.05em;
      word-break: break-all;
    }

    .modal-footer { display: flex; gap: 0.75rem; margin-top: 1.5rem; justify-content: flex-end; }

    .btn-cancel {
      background: transparent; color: #aa6060;
      border: 1px solid var(--border);
      font-family: var(--font-mono);
      font-size: 0.68rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
      letter-spacing: 0.1em;
      text-transform: uppercase;
    }

    .btn-save {
      background: var(--red); color: #000;
      border: 1px solid var(--red);
      font-family: var(--font-mono);
      font-size: 0.68rem;
      font-weight: 700;
      padding: 0.5rem 1.2rem;
      cursor: pointer;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      box-shadow: 0 0 15px rgba(224,16,16,0.3);
    }

    .btn-save:hover { background: #ff2020; }

    /* ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ */
    footer {
      padding: 2rem 0;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 1rem;
      font-size: 0.66rem;
      color: #aa6060;
    }

    footer a { color: #cc4444; text-decoration: none; }
    footer a:hover { color: var(--red); }

    .fsociety-mark { font-family: var(--font-robot); font-size: 1.1rem; color: #cc4444; }

    /* ‚îÄ‚îÄ ANIMATIONS ‚îÄ‚îÄ */
    @keyframes fadeIn { from{opacity:0;transform:translateY(8px);} to{opacity:1;transform:translateY(0);} }
    @keyframes fadeUp  { from{opacity:0;transform:translateY(20px);} to{opacity:1;transform:translateY(0);} }

    @keyframes screenFlicker {
      0%,93%,100%{opacity:1;} 94%{opacity:0.96;} 96%{opacity:0.91;} 97%{opacity:1;}
    }

    @keyframes glitchSafe {
      0%  {transform:translate(0); text-shadow: 0 0 30px var(--red), 0 0 80px var(--red-dim);}
      25% {transform:translate(-4px,0); text-shadow: 4px 0 0 #ff4040, -4px 0 0 #aa0000, 0 0 30px var(--red);}
      50% {transform:translate(4px,0);  text-shadow: -4px 0 0 #ff4040, 4px 0 0 #aa0000, 0 0 30px var(--red);}
      75% {transform:translate(-2px,0); text-shadow: 2px 0 0 #ff4040, 0 0 30px var(--red);}
      100%{transform:translate(0); text-shadow: 0 0 30px var(--red), 0 0 80px var(--red-dim);}
    }

    @keyframes glitch {
      0%  {transform:translate(0);}
      20% {transform:translate(-3px,1px);filter:hue-rotate(90deg);}
      40% {transform:translate(3px,-1px);}
      60% {transform:translate(-1px,2px);filter:hue-rotate(-90deg);}
      80% {transform:translate(2px,-2px);}
      100%{transform:translate(0);filter:none;}
    }

    /* Initial card animation delays */
    #project-grid .card:nth-child(1){animation-delay:3.7s;}
    #project-grid .card:nth-child(2){animation-delay:3.85s;}
    #project-grid .card:nth-child(3){animation-delay:4.0s;}
  </style>
</head>
<body>

<!-- BOOT -->
<div id="boot">
  <div class="boot-logo">fsociety</div>
  <div class="boot-line">[ INITIALIZING SECURE CONNECTION ]</div>
  <div class="boot-bar"><div class="boot-bar-fill"></div></div>
</div>

<!-- ADD PROJECT MODAL -->
<div id="modal-overlay">
  <div class="modal">
    <div class="modal-title">+ Nuevo Proyecto</div>

    <div class="field">
      <label>Nombre del Proyecto *</label>
      <input type="text" id="f-name" placeholder="ej. SHA256" oninput="updatePreview()"/>
      <div class="preview-link" id="preview-link">‚Üó github.com/YoshiZero12/UTTEC-7IDS3-SI/tree/main/...</div>
    </div>

    <div class="field">
      <label>Descripci√≥n *</label>
      <textarea id="f-desc" placeholder="Breve descripci√≥n del proyecto..."></textarea>
    </div>

    <div class="field">
      <label>Tecnolog√≠as (separadas por coma)</label>
      <input type="text" id="f-tags" placeholder="ej. Java, SHA256, JDBC, HTML"/>
    </div>

    <div class="field">
      <label>√çcono</label>
      <input type="text" id="f-icon" placeholder="ej. üîë" maxlength="4" value="üîë"/>
    </div>

    <div class="field">
      <label>Estado</label>
      <select id="f-status">
        <option value="done">Completado</option>
        <option value="wip">En progreso</option>
        <option value="pending">Pr√≥ximo</option>
      </select>
    </div>

    <div class="field">
      <label>Link demo (opcional)</label>
      <input type="text" id="f-demo" placeholder="https://..."/>
    </div>

    <div class="modal-footer">
      <button class="btn-cancel" onclick="closeModal()">Cancelar</button>
      <button class="btn-save" onclick="saveProject()">‚Üó Guardar</button>
    </div>
  </div>
</div>

<div class="container">

  <header>
    <div class="mr-title" id="main-title">MR. ROBOT</div>
    <p class="mr-sub">// Seguridad Inform√°tica ¬∑ 7IDS3 ¬∑ UTTEC</p>

    <div class="header-bottom">
      <div class="sys-info">
        <div>USER&nbsp;&nbsp;<span>yoshiro_pablo_armando</span></div>
        <div>HOST&nbsp;&nbsp;<span>uttec-7ids3.local</span></div>
        <div>REPO&nbsp;&nbsp;<span>github.com/YoshiZero12/UTTEC-7IDS3-SI</span></div>
        <div>STATUS <span id="status-text">[ ONLINE ]</span></div>
      </div>
      <div class="stats">
        <div>
          <div class="stat-num" id="counter-done">0</div>
          <div class="stat-label">Completados</div>
        </div>
        <div>
          <div class="stat-num" id="counter-total">0</div>
          <div class="stat-label">Total</div>
        </div>
      </div>
    </div>

    <div class="terminal">
      <div class="t-line">
        <span class="t-prompt">root@fsociety:~/SI$</span>
        <span>git log --oneline</span>
      </div>
      <div class="t-out">1e96544 Primer commit - Proyecto SI 7IDS3</div>
      <div class="t-out">21 files changed, 2143 insertions(+)</div>
      <div class="t-line" style="margin-top:0.3rem">
        <span class="t-prompt">root@fsociety:~/SI$</span>
        <span><span class="t-cursor"></span></span>
      </div>
    </div>
  </header>

  <section class="projects">
    <div class="section-header">
      <span class="section-label">// exploits &amp; proyectos</span>
      <div class="section-line"></div>
      <button class="btn-add" onclick="openModal()">+ Nuevo Proyecto</button>
    </div>

    <div class="grid" id="project-grid">
      <!-- Cards rendered by JS -->
    </div>
  </section>

  <footer>
    <span class="fsociety-mark">fsociety</span>
    <span>Yoshiro Pablo Armando ¬∑ <a href="https://github.com/YoshiZero12" target="_blank">github.com/YoshiZero12</a></span>
    <span>UTTEC ¬∑ ING. EN DESARROLLO Y GESTI√ìN DE SOFTWARE</span>
  </footer>

</div>

<script>
  const GITHUB_BASE = 'https://github.com/YoshiZero12/UTTEC-7IDS3-SI/tree/main/';
  const STORAGE_KEY = 'fsociety_projects';

  // Default projects
  const DEFAULT_PROJECTS = [
    {
      id: 'SI-001',
      name: 'Login MD5',
      desc: 'Sistema de autenticaci√≥n web con registro e inicio de sesi√≥n. Contrase√±as cifradas con MD5 antes de guardarse en base de datos. Implementado con Java Servlets en NetBeans.',
      tags: ['Java Servlets', 'MD5', 'JDBC', 'HTML', 'NetBeans'],
      icon: 'üîê',
      status: 'done',
      folder: 'MD5',
      demo: ''
    }
  ];

  function getProjects() {
    try {
      const saved = localStorage.getItem(STORAGE_KEY);
      return saved ? JSON.parse(saved) : DEFAULT_PROJECTS;
    } catch(e) {
      return DEFAULT_PROJECTS;
    }
  }

  function saveProjects(projects) {
    localStorage.setItem(STORAGE_KEY, JSON.stringify(projects));
  }

  function generateId(projects) {
    const num = projects.length + 1;
    return 'SI-' + String(num).padStart(3, '0');
  }

  function folderName(name) {
    return name.trim().replace(/\s+/g, '_').toUpperCase();
  }

  function statusLabel(s) {
    if (s === 'done') return '<span class="card-status status-done">Completado</span>';
    if (s === 'wip')  return '<span class="card-status status-done" style="color:#e07010;border-color:#7a3a00;background:rgba(224,112,0,0.05)">En progreso</span>';
    return '<span class="card-status status-pending">Pr√≥ximo</span>';
  }

  function renderCard(p, index) {
    const folder = p.folder || folderName(p.name);
    const link = GITHUB_BASE + folder;
    const tags = p.tags.map(t => `<span class="tag">${t}</span>`).join('');
    const demoBtn = p.demo
      ? `<a class="btn btn-ghost" href="${p.demo}" target="_blank">Demo</a>`
      : '';

    return `
      <div class="card" style="animation-delay:${index * 0.1}s">
        <span class="card-id">${p.id}</span>
        <div class="card-icon">${p.icon || 'üîë'}</div>
        ${statusLabel(p.status)}
        <h3>${p.name}</h3>
        <p class="card-desc">${p.desc}</p>
        <div class="tags">${tags}</div>
        <div class="card-footer">
          <a class="btn btn-primary" href="${link}" target="_blank">‚Üó C√≥digo</a>
          ${demoBtn}
          <button class="btn btn-danger" onclick="deleteProject('${p.id}')">‚úï</button>
        </div>
      </div>
    `;
  }

  function renderAll() {
    const projects = getProjects();
    const grid = document.getElementById('project-grid');
    grid.innerHTML = projects.map((p, i) => renderCard(p, i)).join('');
    updateCounters(projects);
  }

  function updateCounters(projects) {
    const done  = projects.filter(p => p.status === 'done').length;
    const total = projects.length;
    animCounter('counter-done', done);
    animCounter('counter-total', total);
  }

  function animCounter(id, target) {
    const el = document.getElementById(id);
    let v = 0;
    const t = setInterval(() => {
      v += Math.ceil(target / 30);
      if (v >= target) { v = target; clearInterval(t); }
      el.textContent = v;
    }, 30);
  }

  // Modal
  function openModal() {
    document.getElementById('modal-overlay').classList.add('open');
    document.getElementById('f-name').focus();
  }

  function closeModal() {
    document.getElementById('modal-overlay').classList.remove('open');
    resetForm();
  }

  function resetForm() {
    ['f-name','f-desc','f-tags','f-demo'].forEach(id => document.getElementById(id).value = '');
    document.getElementById('f-icon').value = 'üîë';
    document.getElementById('f-status').value = 'done';
    updatePreview();
  }

  function updatePreview() {
    const name = document.getElementById('f-name').value.trim();
    const folder = name ? folderName(name) : '...';
    document.getElementById('preview-link').textContent = '‚Üó github.com/YoshiZero12/UTTEC-7IDS3-SI/tree/main/' + folder;
  }

  function saveProject() {
    const name = document.getElementById('f-name').value.trim();
    const desc = document.getElementById('f-desc').value.trim();

    if (!name || !desc) {
      alert('Nombre y descripci√≥n son obligatorios.');
      return;
    }

    const projects = getProjects();
    const tagsRaw  = document.getElementById('f-tags').value;
    const tags     = tagsRaw ? tagsRaw.split(',').map(t => t.trim()).filter(Boolean) : [];

    const newProject = {
      id:     generateId(projects),
      name:   name,
      desc:   desc,
      tags:   tags,
      icon:   document.getElementById('f-icon').value || 'üîë',
      status: document.getElementById('f-status').value,
      folder: folderName(name),
      demo:   document.getElementById('f-demo').value.trim()
    };

    projects.push(newProject);
    saveProjects(projects);
    closeModal();
    renderAll();
  }

  function deleteProject(id) {
    if (!confirm('¬øEliminar este proyecto de la lista?')) return;
    let projects = getProjects();
    projects = projects.filter(p => p.id !== id);
    // Reassign IDs
    projects = projects.map((p, i) => ({ ...p, id: 'SI-' + String(i+1).padStart(3, '0') }));
    saveProjects(projects);
    renderAll();
  }

  // Close modal on overlay click
  document.getElementById('modal-overlay').addEventListener('click', function(e) {
    if (e.target === this) closeModal();
  });

  // Keyboard ESC
  document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

  // Subtle glitch on title - just shakes, never disappears
  const title = document.getElementById('main-title');
  setInterval(() => {
    if (Math.random() > 0.82) {
      title.style.animation = 'glitchSafe 0.35s ease';
      setTimeout(() => { title.style.animation = ''; }, 350);
    }
  }, 4000);

  // Init
  renderAll();

  updatePreview();
</script>
</body>
</html>